---
phase: 03-b2c-sovereign-experience
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - src/app/(b2c)/briefing/page.tsx
  - src/components/b2c/briefing/EmotionalPhaseCard.tsx
  - src/components/b2c/briefing/BalanceSummary.tsx
  - src/components/b2c/briefing/UpcomingJourneys.tsx
  - src/components/b2c/briefing/RiskStatusCard.tsx
  - src/components/b2c/briefing/DiscretionTierBadge.tsx
  - src/components/b2c/briefing/AdvisorMessagePreview.tsx
  - src/lib/hooks/useServices.ts
autonomous: true

must_haves:
  truths:
    - "UHNI can view Sovereign Briefing with emotional phase indicator"
    - "UHNI can see balance summary in narrative style"
    - "UHNI can see upcoming journey preview cards"
    - "UHNI can see risk status, discretion tier, and advisor message preview"
  artifacts:
    - path: "src/app/(b2c)/briefing/page.tsx"
      provides: "Sovereign Briefing overview page"
      min_lines: 80
    - path: "src/components/b2c/briefing/EmotionalPhaseCard.tsx"
      provides: "Emotional phase indicator with visual representation"
      min_lines: 30
    - path: "src/lib/hooks/useServices.ts"
      provides: "Service hook for accessing mock services"
      min_lines: 20
  key_links:
    - from: "src/app/(b2c)/briefing/page.tsx"
      to: "src/components/b2c/briefing/*"
      via: "component imports"
      pattern: "import.*from.*briefing"
    - from: "src/app/(b2c)/briefing/page.tsx"
      to: "src/lib/services/mock/*"
      via: "useServices hook"
      pattern: "useServices|MockJourneyService|MockIntentService"
---

<objective>
Install Phase 3 dependencies and build the Sovereign Briefing overview page -- the UHNI's personalized home view with emotional phase, balance summary, upcoming journeys, risk status, discretion tier, and advisor message preview.

Purpose: This is the UHNI's first screen after login. It sets the luxury narrative tone for the entire B2C experience and installs dependencies (recharts, date-fns, react-loading-skeleton, react-dropzone, react-day-picker) needed by subsequent plans.
Output: Working /briefing page with 6 data-driven sections pulling from mock services, plus all Phase 3 npm dependencies installed.
</objective>

<execution_context>
@/Users/kavi/.claude/get-shit-done/workflows/execute-plan.md
@/Users/kavi/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-b2c-sovereign-experience/03-RESEARCH.md

@src/app/(b2c)/layout.tsx
@src/app/(b2c)/briefing/page.tsx
@src/lib/types/entities.ts
@src/lib/services/mock/journey.mock.ts
@src/lib/services/mock/intent.mock.ts
@src/lib/services/mock/message.mock.ts
@src/lib/services/interfaces/IIntentService.ts
@src/lib/services/interfaces/IPrivacyService.ts
@src/components/shared/Card/index.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install Phase 3 dependencies and create useServices hook</name>
  <files>
    package.json
    src/lib/hooks/useServices.ts
  </files>
  <action>
    1. Install all Phase 3 dependencies:
       ```
       npm install recharts react-loading-skeleton react-dropzone date-fns react-day-picker
       ```
       Also install types if needed: `npm install -D @types/recharts` (check if recharts bundles types first -- it does, skip).

    2. Create `src/lib/hooks/useServices.ts` -- a convenience hook that instantiates mock services for use in client components:
       ```typescript
       'use client';
       import { useMemo } from 'react';
       import { MockIntentService } from '@/lib/services/mock/intent.mock';
       import { MockJourneyService } from '@/lib/services/mock/journey.mock';
       import { MockMemoryService } from '@/lib/services/mock/memory.mock';
       import { MockMessageService } from '@/lib/services/mock/message.mock';
       // ... other services as needed

       export function useServices() {
         return useMemo(() => ({
           intent: new MockIntentService(),
           journey: new MockJourneyService(),
           memory: new MockMemoryService(),
           message: new MockMessageService(),
         }), []);
       }
       ```
       This abstracts service instantiation so components don't import mock classes directly. When real APIs arrive, only this hook changes.

    3. Create a `src/lib/hooks/useCurrentUser.ts` hook that returns a mock current user for B2C context (id, name, role = UHNI). Use zustand or simple state. This enables all B2C pages to reference the current user. For now, return a hardcoded mock UHNI user with a consistent ID (use a UUID constant like `MOCK_UHNI_USER_ID`).

    AVOID: Don't create a global context provider -- hooks with memoized instances are simpler for mock-first development. Don't use React Query yet (no real API calls).
  </action>
  <verify>
    `npm run build` succeeds with new dependencies. The useServices hook file exists and exports correctly. No TypeScript errors.
  </verify>
  <done>
    All Phase 3 npm dependencies installed. useServices hook provides typed access to all mock services. useCurrentUser hook returns mock UHNI user. Build passes.
  </done>
</task>

<task type="auto">
  <name>Task 2: Build Sovereign Briefing overview page with 6 data sections</name>
  <files>
    src/app/(b2c)/briefing/page.tsx
    src/components/b2c/briefing/EmotionalPhaseCard.tsx
    src/components/b2c/briefing/BalanceSummary.tsx
    src/components/b2c/briefing/UpcomingJourneys.tsx
    src/components/b2c/briefing/RiskStatusCard.tsx
    src/components/b2c/briefing/DiscretionTierBadge.tsx
    src/components/b2c/briefing/AdvisorMessagePreview.tsx
  </files>
  <action>
    Replace the placeholder briefing page with a full Sovereign Briefing. This is a WEBSITE page, NOT a dashboard -- think luxury magazine editorial layout.

    1. **EmotionalPhaseCard.tsx** (BREF-01): Shows current emotional phase with a visual indicator. Use a radial/circular progress or a styled badge showing phase name (e.g., "Renewal", "Exploration", "Consolidation"). Derive from intent profile's emotional drivers. Use teal/rose color palette. Include a brief narrative sentence about the phase.

    2. **BalanceSummary.tsx** (BREF-02): Narrative-style emotional balance display. Show emotional drivers as a small radar chart using Recharts (RadarChart). Display top 2-3 drivers with narrative text like "Your strongest drivers are Legacy and Security, suggesting a focus on lasting impact." Use sand/rose palette.

    3. **UpcomingJourneys.tsx** (BREF-03): Show 2-3 upcoming journey preview cards fetched from journey service. Each card shows title, category, status badge, and a brief narrative excerpt. Use Card component. Link each to /journeys/[id]. Show empty state if no journeys.

    4. **RiskStatusCard.tsx** (BREF-04): Simplified risk status -- show a color-coded indicator (green/amber/red) with a plain-language sentence. Pull from mock data (hardcoded for now since risk service is B2B-focused). Keep it non-technical.

    5. **DiscretionTierBadge.tsx** (BREF-05): Display current privacy/discretion tier (High/Medium/Standard) as a styled badge. Link to /privacy settings.

    6. **AdvisorMessagePreview.tsx** (BREF-06): Show latest message thread summary -- advisor name, last message snippet, timestamp. Fetch from message service. Link to /messages. Show "No messages yet" empty state.

    7. **Briefing page.tsx**: Compose all 6 components in a luxury editorial layout:
       - Hero section: "Your Sovereign Briefing" with date and greeting ("Good morning, [Name]")
       - 2-column grid on desktop (emotional phase + balance on left, journeys on right)
       - Below: risk + discretion + advisor preview in a 3-column row
       - Use Framer Motion for entrance animations (staggered fade-in)
       - Use react-loading-skeleton for loading states while services fetch
       - Mark as 'use client' since it uses hooks

    DESIGN: Luxury magazine aesthetic -- generous whitespace, serif headings (font-serif), warm sand backgrounds, rose/teal accents. NOT a dashboard with dense data. Each section should feel like a vignette.

    AVOID: No dummy "Coming soon" placeholders. Each section must show real mock data from services or meaningful empty states. No SaaS dashboard card grid.
  </action>
  <verify>
    `npm run build` succeeds. Navigate to /briefing and confirm:
    - Page renders with all 6 sections
    - Emotional phase indicator visible with phase name
    - Balance summary shows radar chart (or narrative text if no profile)
    - Journey cards render (or empty state)
    - Risk status, discretion badge, advisor preview all render
    - No TypeScript errors, no console errors
  </verify>
  <done>
    Sovereign Briefing page shows all 6 sections: emotional phase indicator (BREF-01), balance summary with chart (BREF-02), upcoming journeys (BREF-03), risk status (BREF-04), discretion tier badge (BREF-05), advisor message preview (BREF-06). All pull from mock services. Luxury editorial layout, not dashboard. Build passes.
  </done>
</task>

</tasks>

<verification>
- `npm run build` completes without errors
- /briefing route renders full Sovereign Briefing with 6 sections
- Mock data flows from services through hooks to UI components
- Luxury editorial layout maintained (not dashboard aesthetic)
- All BREF requirements (01-06) addressed
</verification>

<success_criteria>
1. UHNI can view Sovereign Briefing overview with emotional phase indicator, balance summary, upcoming journeys, risk status, discretion tier, and advisor message preview (Success Criteria #1)
2. All Phase 3 npm dependencies installed and build passes
3. useServices hook provides clean service access pattern for all subsequent plans
</success_criteria>

<output>
After completion, create `.planning/phases/03-b2c-sovereign-experience/03-01-SUMMARY.md`
</output>
