---
phase: 01-foundation-design-system
plan: 02
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - src/components/shared/Button/Button.tsx
  - src/components/shared/Button/index.ts
  - src/components/shared/Input/Input.tsx
  - src/components/shared/Input/index.ts
  - src/components/shared/Card/Card.tsx
  - src/components/shared/Card/index.ts
  - src/components/shared/Modal/Modal.tsx
  - src/components/shared/Modal/index.ts
  - src/components/shared/Dropdown/Dropdown.tsx
  - src/components/shared/Dropdown/index.ts
  - src/components/shared/Accordion/Accordion.tsx
  - src/components/shared/Accordion/index.ts
  - src/components/shared/Tabs/Tabs.tsx
  - src/components/shared/Tabs/index.ts
  - src/components/shared/Select/Select.tsx
  - src/components/shared/Select/index.ts
  - src/components/shared/index.ts
  - src/lib/utils/cn.ts
autonomous: true

must_haves:
  truths:
    - "Button component renders in 4 variants (primary, secondary, ghost, destructive) with correct luxury palette colors"
    - "Input component supports label, placeholder, error state, and disabled state with luxury styling"
    - "Card component renders with subtle shadow and optional header/footer sections"
    - "Modal opens and closes with smooth animation, has overlay backdrop, and traps focus (Radix Dialog)"
    - "Dropdown menu opens on trigger click, shows items, and closes on selection or outside click (Radix DropdownMenu)"
    - "Accordion expands/collapses sections with animation (Radix Accordion)"
    - "Tabs switch content panels on click with active indicator (Radix Tabs)"
    - "All components use font-serif for headings and font-sans for body text"
    - "All interactive components have focus ring styles using rose-500"
  artifacts:
    - path: "src/components/shared/Button/Button.tsx"
      provides: "Button component with variants"
      contains: "variant, size, className"
      min_lines: 40
    - path: "src/components/shared/Modal/Modal.tsx"
      provides: "Modal using Radix Dialog"
      contains: "Dialog.Root, Dialog.Portal, Dialog.Overlay"
      min_lines: 40
    - path: "src/components/shared/Dropdown/Dropdown.tsx"
      provides: "Dropdown using Radix DropdownMenu"
      contains: "DropdownMenu.Root"
    - path: "src/components/shared/Accordion/Accordion.tsx"
      provides: "Accordion using Radix Accordion"
      contains: "Accordion.Root"
    - path: "src/components/shared/Tabs/Tabs.tsx"
      provides: "Tabs using Radix Tabs"
      contains: "Tabs.Root"
    - path: "src/lib/utils/cn.ts"
      provides: "Tailwind class merge utility"
      exports: ["cn"]
    - path: "src/components/shared/index.ts"
      provides: "Barrel export for all shared components"
      exports: ["Button", "Input", "Card", "Modal", "Dropdown", "Accordion", "Tabs"]
  key_links:
    - from: "src/components/shared/Modal/Modal.tsx"
      to: "@radix-ui/react-dialog"
      via: "import * as Dialog from '@radix-ui/react-dialog'"
      pattern: "radix-ui.*dialog"
    - from: "src/components/shared/Button/Button.tsx"
      to: "src/lib/utils/cn.ts"
      via: "import { cn } from '@/lib/utils/cn'"
      pattern: "import.*cn"
---

<objective>
Build the shared UI primitive components using Radix UI headless primitives styled with Tailwind and the luxury color palette. These components are the building blocks for every page across all 4 route groups.

Purpose: Every feature page (B2C journeys, B2B dashboard, admin panel) needs buttons, inputs, cards, modals, dropdowns, accordions, and tabs. Building them once with luxury styling ensures visual consistency and prevents each feature from reinventing UI.
Output: 8 shared components (Button, Input, Card, Modal, Dropdown, Accordion, Tabs, Select) with Radix accessibility baked in.
</objective>

<execution_context>
@/Users/kavi/.claude/get-shit-done/workflows/execute-plan.md
@/Users/kavi/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-design-system/01-RESEARCH.md (Pattern 4: Radix UI Primitives with Tailwind)
@.planning/phases/01-foundation-design-system/01-01-SUMMARY.md (for Tailwind config, font setup)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create utility helpers and foundational components (Button, Input, Card)</name>
  <files>
    src/lib/utils/cn.ts
    src/components/shared/Button/Button.tsx
    src/components/shared/Button/index.ts
    src/components/shared/Input/Input.tsx
    src/components/shared/Input/index.ts
    src/components/shared/Card/Card.tsx
    src/components/shared/Card/index.ts
  </files>
  <action>
    1. Create `src/lib/utils/cn.ts`:
       - Install `clsx` and `tailwind-merge` as dependencies (run `pnpm add clsx tailwind-merge`)
       - Export a `cn` function that composes clsx and tailwind-merge:
         ```
         import { clsx, type ClassValue } from 'clsx'
         import { twMerge } from 'tailwind-merge'
         export function cn(...inputs: ClassValue[]) { return twMerge(clsx(inputs)) }
         ```

    2. Create `src/components/shared/Button/Button.tsx`:
       - 'use client' directive (interactive component)
       - Props interface: variant ('primary' | 'secondary' | 'ghost' | 'destructive' | 'outline'), size ('sm' | 'md' | 'lg'), disabled, loading, className, children, onClick, type ('button' | 'submit' | 'reset')
       - Also accept all standard button HTML attributes via React.ButtonHTMLAttributes
       - Variant styles:
         - primary: bg-rose-500 text-white hover:bg-rose-600 — the main CTA color
         - secondary: bg-sand-200 text-sand-900 hover:bg-sand-300 — softer actions
         - ghost: bg-transparent text-rose-700 hover:bg-rose-50 — minimal footprint
         - destructive: bg-red-600 text-white hover:bg-red-700 — dangerous actions
         - outline: border border-rose-300 text-rose-700 hover:bg-rose-50 — bordered variant
       - Size styles:
         - sm: px-3 py-1.5 text-sm
         - md: px-5 py-2.5 text-base (default)
         - lg: px-7 py-3.5 text-lg
       - All variants: font-sans font-medium rounded-md transition-colors duration-200
       - Focus: focus:outline-none focus:ring-2 focus:ring-rose-500 focus:ring-offset-2
       - Disabled: opacity-50 cursor-not-allowed
       - Loading state: show a spinner SVG, disable interactions
       - Use `cn` for class merging to allow className override
       - Use React.forwardRef for ref forwarding

    3. Create `src/components/shared/Input/Input.tsx`:
       - 'use client' directive
       - Props: label?, placeholder?, error? (string), disabled, className, type (text | email | password | number), id, name
       - Also accept all standard input HTML attributes
       - Styling:
         - Container: flex flex-col gap-1.5
         - Label: font-sans text-sm font-medium text-rose-900
         - Input: w-full px-4 py-2.5 bg-white border border-sand-300 rounded-md font-sans text-rose-900 placeholder:text-sand-400
         - Focus: focus:outline-none focus:ring-2 focus:ring-rose-500 focus:border-rose-500
         - Error: border-red-500 focus:ring-red-500 + error message in text-red-600 text-sm
         - Disabled: bg-sand-50 opacity-60 cursor-not-allowed
       - Use React.forwardRef

    4. Create `src/components/shared/Card/Card.tsx`:
       - Props: className, children, variant ('default' | 'elevated' | 'outlined'), padding ('sm' | 'md' | 'lg')
       - Sub-components: Card, CardHeader, CardTitle, CardDescription, CardContent, CardFooter
       - Styling:
         - default: bg-white rounded-lg shadow-sm border border-sand-100
         - elevated: bg-white rounded-lg shadow-lg border border-sand-50
         - outlined: bg-white rounded-lg border border-sand-200 shadow-none
         - CardHeader: px-6 pt-6 pb-2
         - CardTitle: font-serif text-xl text-rose-900
         - CardDescription: font-sans text-sm text-sand-600 mt-1
         - CardContent: px-6 py-4
         - CardFooter: px-6 pb-6 pt-2 flex items-center gap-3

    5. Create barrel index files for each component.
  </action>
  <verify>
    Run `pnpm tsc --noEmit` — all component files compile.
    Import Button, Input, Card from their respective paths — no errors.
  </verify>
  <done>
    Button renders in 5 variants with 3 sizes. Input shows label, error, and disabled states. Card renders with header/content/footer sub-components. All use luxury palette and font stacks. All forward refs. All accept className overrides via cn utility.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create Radix UI primitives (Modal, Dropdown, Accordion, Tabs, Select) and barrel export</name>
  <files>
    src/components/shared/Modal/Modal.tsx
    src/components/shared/Modal/index.ts
    src/components/shared/Dropdown/Dropdown.tsx
    src/components/shared/Dropdown/index.ts
    src/components/shared/Accordion/Accordion.tsx
    src/components/shared/Accordion/index.ts
    src/components/shared/Tabs/Tabs.tsx
    src/components/shared/Tabs/index.ts
    src/components/shared/Select/Select.tsx
    src/components/shared/Select/index.ts
    src/components/shared/index.ts
  </files>
  <action>
    1. Create `src/components/shared/Modal/Modal.tsx`:
       - 'use client' directive
       - Built on @radix-ui/react-dialog
       - Props: open, onOpenChange, title, description?, children, size? ('sm' | 'md' | 'lg')
       - Export Modal (Root + Portal + Overlay + Content), ModalTrigger (Dialog.Trigger styled), ModalClose
       - Overlay: fixed inset-0 bg-black/50 with fade-in/out animation using data-[state=open/closed]
       - Content: centered (fixed left-1/2 top-1/2 -translate), bg-white, rounded-lg, shadow-xl, p-6
       - Size: sm(max-w-sm), md(max-w-md), lg(max-w-lg)
       - Title: font-serif text-2xl text-rose-900
       - Description: font-sans text-sm text-sand-600
       - Close button: absolute top-4 right-4 with X icon from lucide-react
       - Animations: data-[state=open]:animate-in data-[state=closed]:animate-out fade + zoom + slide
       - Focus trap is automatic via Radix

    2. Create `src/components/shared/Dropdown/Dropdown.tsx`:
       - 'use client' directive
       - Built on @radix-ui/react-dropdown-menu
       - Export: Dropdown (Root), DropdownTrigger, DropdownContent, DropdownItem, DropdownSeparator, DropdownLabel
       - DropdownContent: min-w-[200px] bg-white rounded-md p-1 shadow-lg border border-sand-100 with animate-in/out
       - DropdownItem: flex items-center gap-2 px-3 py-2 text-sm text-rose-900 rounded-sm hover:bg-rose-50 focus:bg-rose-50 outline-none cursor-pointer
       - DropdownSeparator: h-px bg-sand-200 my-1
       - DropdownLabel: px-3 py-1.5 text-xs font-medium text-sand-500 uppercase tracking-wide

    3. Create `src/components/shared/Accordion/Accordion.tsx`:
       - 'use client' directive
       - Built on @radix-ui/react-accordion
       - Export: Accordion (Root), AccordionItem, AccordionTrigger, AccordionContent
       - AccordionItem: border-b border-sand-200
       - AccordionTrigger: flex w-full items-center justify-between py-4 font-serif text-lg text-rose-900 hover:text-rose-700 transition-colors [data-state=open]>svg:rotate-180
       - Include ChevronDown icon from lucide-react that rotates on open
       - AccordionContent: overflow-hidden text-sm font-sans text-sand-700 transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down
       - Add accordion-up/accordion-down keyframes to tailwind.config.ts if not already present

    4. Create `src/components/shared/Tabs/Tabs.tsx`:
       - 'use client' directive
       - Built on @radix-ui/react-tabs
       - Export: Tabs (Root), TabsList, TabsTrigger, TabsContent
       - TabsList: flex border-b border-sand-200
       - TabsTrigger: px-4 py-2.5 font-sans text-sm text-sand-600 hover:text-rose-700 data-[state=active]:text-rose-900 data-[state=active]:border-b-2 data-[state=active]:border-rose-500 transition-colors
       - TabsContent: py-4 font-sans text-rose-900

    5. Create `src/components/shared/Select/Select.tsx`:
       - 'use client' directive
       - Built on @radix-ui/react-select
       - Export: Select (Root), SelectTrigger, SelectContent, SelectItem, SelectValue, SelectGroup, SelectLabel
       - SelectTrigger: flex items-center justify-between px-4 py-2.5 bg-white border border-sand-300 rounded-md font-sans text-rose-900 hover:border-rose-400 focus:ring-2 focus:ring-rose-500
       - Include ChevronDown indicator
       - SelectContent: bg-white rounded-md shadow-lg border border-sand-100 overflow-hidden
       - SelectItem: px-3 py-2 text-sm text-rose-900 hover:bg-rose-50 focus:bg-rose-50 outline-none cursor-pointer data-[state=checked]:bg-rose-100

    6. Create `src/components/shared/index.ts`:
       - Barrel export ALL components: Button, Input, Card (and sub-components), Modal, Dropdown (and sub-components), Accordion, Tabs, Select
       - This enables: `import { Button, Modal, Card } from '@/components/shared'`
  </action>
  <verify>
    Run `pnpm tsc --noEmit` — all Radix component files compile.
    Run `pnpm build` — production build succeeds (important: Radix + 'use client' directives are correct).
    Verify barrel export: import { Button, Input, Card, Modal, Dropdown, Accordion, Tabs, Select } from '@/components/shared' compiles.
  </verify>
  <done>
    8 shared UI primitives built: Button (5 variants), Input (with error/disabled states), Card (with sub-components), Modal (Radix Dialog with focus trap), Dropdown (Radix DropdownMenu), Accordion (Radix Accordion with chevron rotation), Tabs (Radix Tabs with active indicator), Select (Radix Select with styled options). All use luxury palette. All accessible via Radix. All exported from barrel index.
  </done>
</task>

</tasks>

<verification>
1. `pnpm tsc --noEmit` passes
2. `pnpm build` succeeds
3. All 8 components importable from `@/components/shared`
4. Modal has focus trap (Tab key stays within modal)
5. Dropdown closes on outside click
6. Accordion animates open/close
7. Tabs switch panels on click
8. All components use font-serif for headings, font-sans for body
9. Focus rings use rose-500 palette
</verification>

<success_criteria>
- 8 shared components built and exported: Button, Input, Card, Modal, Dropdown, Accordion, Tabs, Select
- Radix UI provides accessibility (focus trap, keyboard nav, ARIA attributes) automatically
- Luxury styling: rose/sand/olive/teal/gold palette, serif headings, sans body
- cn utility enables className override for all components
- Production build succeeds
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-design-system/01-02-SUMMARY.md`
</output>
